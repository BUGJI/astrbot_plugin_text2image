# 文字转图片

是的这个插件可以转换文本到图片

主要是可以按照超级高自定义规则生成

# 使用方法

使用 ```texttool generate 请输入文本``` 生成一段文本的图片

按照插件默认值和字体生成

默认会生成透明底黑字，这个高度是等高的，宽度会随着文字数量变化

## 新手教程

### 新冒险者请先从这里开始读，对整个功能的理解有帮助

在文本前面是可以添加参数的，如果你想逐字生成，可以加入mode参数

```texttool generate mode:char 请输入文本```

参数应加入到generate命令的后面，待生成文本的前面

当你使用非单图模式时，会将任务加入排程，待完成后将发送压缩包

文件名以 ```压缩包名字_texttool_8位顺序数字.png``` 生成，例如上方例程的压缩包的文件名应为：

```
12345678_texttool_00000000.png
12345678_texttool_00000001.png
12345678_texttool_00000002.png
12345678_texttool_00000003.png
12345678_texttool_00000004.png
```

在Windows的文件资源管理器中，可以正确按照文件名排序

### 生成模式

mode参数一共有5个

| 参数名 | 注解 |
| ---- | ---- |
| single | 即单图模式，也是默认模式 |
| char | 按照字符分隔，一个字符一个图片 |
| word | 按照词语分隔，通常为空格分隔，一个词语一个图片 |
| line | 按照行分隔，一行对应一个图片 |
| token | 按照 ```\|``` 分隔，其为更精确的分隔方式，但是需要对文本处理较多 |

参数应加入到文本前面，就像这样

```texttool generate mode:word hello world```

你可以同时添加其它参数

## 选择字体

你可以指定在程序内支持的字体

你可以使用 ```texttool font_list``` 来查看可以使用的字体名字

> 需要管理员提前在 ```plugin_data/astrbot_plugin_text2image/ttf``` 放置字体文件，并且在上级目录的 ```fonts.json``` 定义字体别名，配置将放在后面讲

如果列表显示Arial，你可以添加font:Arial参数进来

加上上面的命令组合里面就像

```texttool generate mode:word font:Arial hello world```

这样子就能以 词语模式、Arial字体 来生成 hello world 图片了

如果你看懂了参数如何添加，那就来接受下面的更多参数吧

## 进阶教程

我将分成三个类别，依据常用度排序

### 常用参数

#### 生成模式：

使用 mode:值 作为参数

| 参数名 | 注解 |
| ---- | ---- |
| single | 即单图模式，也是默认模式 |
| char | 按照字符分隔，一个字符一个图片 |
| word | 按照词语分隔，通常为空格分隔，一个词语一个图片 |
| line | 按照行分隔，一行对应一个图片 |
| token | 按照 ```\|``` 分隔，其为更精确的分隔方式，但是需要对文本处理较多 |

#### 背景颜色：

使用 bg_color:值 作为参数

可以填写16进制的RGB(A)值

例如 ```bg_color:#00FF00```

如果不写Alpha值则默认不透明

#### 字体颜色：

使用 text_color:值 作为参数

可以填写16进制的RGB(A)值

例如 ```text_color:#00FF00```

如果不写Alpha值则默认不透明

#### 中心模式：

有些字可能并不需要以额定宽度，例如：```氵```

如果希望以文字大小为中心，则添加 center_mode:值 作为参数

使用 ```center_mode:geometry``` 则以文字实际大小计算

默认为visual

#### 清晰度：

我感觉是可以这么理解的吧...

如果需要调节清晰度，则使用 dpi:值 作为参数

默认为 ```dpi:72``` 如果需要更清晰建议200-800之间

### 进阶参数

通常也用不太多，但是至少是有的

#### 边缘留白（边距）

如果你希望添加边距，则使用 padding:值 作为参数

当你使用 ```padding:10``` 时，每一张图片都会在四个方向增加边距

或许你可以自己加光效什么的

#### 中心点

如果你希望调整中心点，可以使用 x_offset_ratio:值 作为参数

同样，也有配套的 y_offset_ratio:值 作为参数

默认0.5，通常介于0-1之间

如果设置为0，则在左边补偿一样宽度的底来调整中心

其它同理

### 高级参数

说到高级...

实际上这些并不常用，已经有了比较好的预定值

但是你仍然可以尝试修改它

#### 文字大小

你可以使用 font_size:值 来更改文字大小

#### 图片高度

你可以使用 canvas_height:值 来更改图片高度

#### 图片宽度

你可以使用 canvas_width:值 来更改图片宽度

注意：当你修改此值后，宽度则为定宽，可能导致每个文字大小不一样或者超出

# 感谢

ChatGPT：编写代码


